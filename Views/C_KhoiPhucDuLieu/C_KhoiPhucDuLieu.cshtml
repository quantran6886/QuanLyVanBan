
@{
    ViewBag.Title = "Khôi phục dữ liệu";
}
@section Scripts{
    <script src="~/assets/Farmwork/mustache/mustache.min.js"></script>
    <script>
        var myControl = {

            init: function () {
                myControl.event();
                myControl.LoadTable();
            },

            event: function () {

            },

            Reset: function() {
                $('#listThu').html("");
            },

            LoadTable: function () {
                $.ajax({
                    url: '/C_KhoiPhucDuLieu/LoadTable',
                    type: 'GET',
                    dataType: 'json',
                    success: function (res) {
                        if (res.status == true) {
                            var lstDSThu = res.lstDSThu;
                            var htmlThu = '';
                            var template = $('#data-template-danh-sach-thu').html();
                            if (lstDSThu != null) {
                                $.each(lstDSThu, function (i, item) {
                                    htmlThu += Mustache.render(template, {
                                        noi_dung_thu: item.noi_dung_thu,
                                        IdKeHoach: item.IdKeHoach,
                                        ngay_tao_phieu: item.ngay_tao_phieu,
                                        so_tien_thu_du_kien: item.so_tien_thu_du_kien,
                                    });
                                });
                                $('#listThu').html(htmlThu);
                                $("#image_thu").hide();

                            } else {
                                $("#image_thu").show();
                            }
                        }
                    }
                });
            },
            KhoiPhucDuLieu: function (IdKeHoach) {
                swal({
                    title: "Bạn có chắc muốn khôi phục dữ liệu!",
                    text: "Mọi dữ liệu sẽ được khôi phục lại như ban đầu bạn hãy kiểm tra lại!",
                    showCancelButton: true,
                    closeOnConfirm: true,
                    cancelButtonText: "Thoát",
                    cancelButtonClass: "btn-sm btn-danger btn-round",
                    confirmButtonClass: "btn-sm btn-round btn-primary",
                    confirmButtonText: "Đồng ý",
                }, function () {
                    if (IdKeHoach > 0) {
                        $.ajax({
                            type: 'Post',
                            url: '/C_KhoiPhucDuLieu/KhoiPhucDuLieu',
                            datatype: 'json',
                            data: {
                                IdKeHoach: IdKeHoach,
                            },
                            success: function (response) {
                                if (response.code) {
                                    myControl.LoadTable();
                                    notify('success', 'Thành Công', 'Cập nhập thành công');
                                }
                            }
                        });
                    } else {
                        notify('error', 'Có lỗi', 'Bạn chưa chọn bản ghi cần khôi phục');
                    }
                });
            },

        };
        myControl.init();

      
    </script>
}
<h1 class="page-header my-4 mb-0">Xóa &amp; Khôi phục dữ liệu</h1>
<div class="panel panel-inverse">
    <div class="panel-heading bg-cyan-700 text-white ui-sortable-handle">
        <div class="panel-heading-btn">
            <a href="javascript:;" class="btn btn-xs btn-icon btn-default" data-toggle="panel-expand"><i class="fa fa-expand"></i></a>
            <a href="javascript:;" class="btn btn-xs btn-icon btn-success" data-toggle="panel-reload"><i class="fa fa-redo"></i></a>
            <a href="javascript:;" class="btn btn-xs btn-icon btn-warning" data-toggle="panel-collapse"><i class="fa fa-minus"></i></a>
        </div>
    </div>
    <div class="panel-body pt-0">
        <div id="content" class="app-content p-0 m-0 bg-component">
            <div class="app-content-padding px-0 py-3">
                <div class="d-lg-flex mb-2">
                    <button type="button" id="btn_Remove" class="btn btn-danger btn-sm me-1 mb-1">
                        <span class="fa fa-trash"></span> Xóa dữ liệu
                    </button>
                    <div class="col-lg-9 p-0">
                        <div class="position-relative">
                            <input type="text" class="form-control form-control-sm ps-35px rounded-3" placeholder="Tìm kiếm nhanh..." />
                            <button class="btn position-absolute start-0 top-0 shadow-none p-3"><i class="fa fa-search fa-lg"></i></button>
                        </div>
                    </div>
                </div>
                <hr class="mb-10px mt-0 bg-gray-600 text-danger">
                <div class="tab-overflow">
                    <div class="row">
                        <div class="col-lg-4">
                            <ul class="nav nav-tabs nav-tabs-deffault card  border-1 card-border-c-blue" style="width: 100%;">
                                <li class="nav-item prev-button"><a href="javascript:;" data-click="prev-tab" class="nav-link text-primary"><i class="fa fa-arrow-left"></i></a></li>
                                <li class="nav-item"><a href="#nav-tab-1" data-bs-toggle="tab" class="nav-link active">Danh sách dữ liệu thu</a></li>
                                <li class="nav-item"><a href="#nav-tab-2" data-bs-toggle="tab" class="nav-link">Danh sách dữ liệu chi</a></li>
                                <li class="nav-item next-button"><a href="javascript:;" data-click="next-tab" class="nav-link text-primary"><i class="fa fa-arrow-right"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel-body tab-content p-0">
                <div class="tab-pane fade active show" id="nav-tab-1">
                    <div class="row gx-1" id="listThu">
                        <div id="image_thu">
                            <div class="fa-10x text-center">
                                <img src="~/assets/img/notfound.jpg" class="table-responsive" />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="nav-tab-2">
                    <div id="image_chi">
                        <div class="fa-10x text-center">
                            <img src="~/assets/img/notfound.jpg" class="table-responsive" />
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<div class="modal fade" id="modal-can-bo">
    <div class="modal-dialog" style="max-width:35%">
        <div class="modal-content">
            <div class="panel panel-inverse m-0">
                <div class="panel-heading  bg-cyan-700 text-white">
                    <h4 class="panel-title">Thêm mới cán bộ</h4>
                    <div class="panel-heading-btn">
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-default" data-toggle="panel-expand"><i class="fa fa-expand"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-success" data-toggle="panel-reload"><i class="fa fa-redo"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-danger" data-toggle="panel-remove"><i class="fa fa-times"></i></a>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-12">
                                    <label class="form-label mt-1">Mã cán bộ:<font class="text-danger">*</font></label>
                                    <input class="form-control" placeholder="Mã cán bộ ..." type="text" />
                                </div>
                                <div class="col-sm-12">
                                    <label class="form-label mt-1">CMND/Căn cước:<font class="text-danger">*</font></label>
                                    <input class="form-control" placeholder="Số hiệu giấy tờ" type="text" />
                                </div>
                                <div class="col-sm-12">
                                    <label class="form-label mt-1">Họ tên:<font class="text-danger">*</font></label>
                                    <input class="form-control" placeholder="Tên cán bộ" type="text" />
                                </div>
                                <div class="col-sm-6">
                                    <label class="form-label mt-1">Chức vụ:</label>
                                    <select class="selectpicker">
                                        <option value="">Giám đốc</option>
                                        <option value="">Phó giám đốc</option>
                                        <option value="">Kế toán</option>
                                        <option value="">Cán bộ kỹ thuật</option>
                                    </select>
                                </div>
                                <div class="col-sm-6">
                                    <label class="form-label mt-1">Giới tính:</label>
                                    <select class="selectpicker" id="chuc_vu">
                                        <option value="">Nam</option>
                                        <option value="">Nữ</option>
                                    </select>
                                </div>
                                <div class="col-sm-6">
                                    <label class="form-label mt-1">Ngày sinh:</label>
                                    <input class="form-control" type="date" />
                                </div>
                                <div class="col-sm-6">
                                    <label class="form-label mt-1">Email:</label>
                                    <input class="form-control" placeholder="Email" type="text" />
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer m-0 p-0">
                    <a class="btn btn-sm btn-danger" data-bs-dismiss="modal"><i class="fa fa-arrow-rotate-left"></i> Thoát</a>
                    <a class="btn btn-sm btn-success"><i class="fa fa-save"></i> Cập nhập</a>
                </div>
            </div>
        </div>
    </div>
</div>
<script id="data-template-danh-sach-thu" type="x-tmpl-mustache">
    <div class="col-sm-2 mb-1">
        <div class="p-2 d-flex align-items-center card border-1 rounded">
            <div class="text-center bg_boder_red">
                <a href="javascript:;">
                    <img src="../assets/img/file.png" alt="" class="mw-100  p-1" width="130">
                </a>
            </div>
            <div class="text-center">
                <b class="text-muted">{{noi_dung_thu}}</b>
                <div class="pt-2 pb-1">Ngày tạo: {{ngay_tao_phieu}}</div>
                <div class="pt-2 pb-1">Tiền thu dự kiến - {{so_tien_thu_du_kien}}</div>
            </div>
            <div class="row text-center">
                <a href="javascript:myControl.KhoiPhucDuLieu({{IdKeHoach}})" class="btn border-0 w-40px h-40px text-gray-500 rounded-pill d-flex align-items-center justify-content-center"><i class="fa fa-refresh text-success fa-lg"></i></a>
                <a href="javascript:;" class="btn border-0 w-40px h-40px text-gray-500 rounded-pill d-flex align-items-center justify-content-center"><i class="fa fa-trash text-danger fa-lg"></i></a>
            </div>
        </div>
    </div>
</script>